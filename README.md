# Cardnet

**Cardnet** — это клиент-серверная карточная игра, разработанная на Python с использованием библиотеки Pygame для графического интерфейса и `asyncio` для сетевого взаимодействия. Проект демонстрирует реализацию классических механик карточных игр (ККИ) на базе архитектуры Entity-Component-System (ECS) с помощью библиотеки `esper`.

## Основные возможности

### Сетевое взаимодействие
- **Клиент-серверная архитектура**: Позволяет играть вдвоем по локальной сети.
- **Обнаружение серверов**: Клиент автоматически находит активные серверы в локальной сети через UDP broadcast.
- **Лобби**: Игроки попадают в лобби, где могут общаться в чате и подтверждать готовность к началу матча.
- **Обработка переподключений**: Игрок может переподключиться к идущей игре в случае разрыва соединения.

### Игровой процесс
- **Система фаз хода**: Реализована логика, схожая с Magic: The Gathering (главная фаза, фаза атаки, фаза блокирования).
- **Розыгрыш карт**: Поддержка розыгрыша карт существ, земель и заклинаний с таргетом.
- **Боевая система**: Существа могут атаковать оппонента или блокировать атакующих существ с расчетом урона.
- **Мана и ресурсы**: Игроки используют ману, получаемую от земель, для розыгрыша карт.
- **Муллиган**: В начале игры доступна механика сброса и взятия новой стартовой руки.

### Техническая реализация
- **ECS (Entity-Component-System)**: Игровая логика построена на базе библиотеки `esper`, что делает код модульным и расширяемым.
- **Асинхронный сервер**: Сервер на `asyncio` эффективно обрабатывает подключения и сообщения от клиентов.
- **Интерфейс на Pygame**: Вся визуальная часть и обработка ввода реализованы с помощью Pygame.

## Установка и запуск

Для запуска проекта вам понадобится Python 3.10 или выше.

### 1. Клонирование репозитория

```bash
git clone <URL вашего репозитория>
cd Cardnet
```

### 2. Создание и активация виртуального окружения

```bash
# Windows
python -m venv .venv
.venv\Scripts\activate

# macOS / Linux
python3 -m venv .venv
source .venv/bin/activate
```

### 3. Установка зависимостей

Проекту требуются две основные библиотеки:

```bash
pip install pygame esper
```

### 4. Запуск сервера

В одном терминале запустите сервер:
```bash
python -m src.server.main
```

### 5. Запуск клиента

В другом терминале запустите клиент (можно запустить два экземпляра на одной или разных машинах в одной сети):
```bash
python -m src.client.main
```
Клиент откроет меню, где можно будет найти и подключиться к запущенному серверу.